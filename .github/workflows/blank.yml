name: List Secrets and Variables

on:
  workflow_dispatch:

jobs:
  list-secrets-variables:
    runs-on: windows-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Run PowerShell script to list secrets and variables
        shell: pwsh
        run: |
          # List all secrets
          Write-Output "Secrets:"
          Write-Output "-------"
          Get-ChildItem -Recurse -Filter "*.env" -File | ForEach-Object {
              Write-Output "File: $($_.FullName)"
              Get-Content $_.FullName
          }

          # List all variables
          Write-Output "Variables:"
          Write-Output "---------"
          Get-ChildItem -Recurse | ForEach-Object {
              $_ | Select-String "^[A-Za-z_][A-Za-z0-9_]*=" | ForEach-Object {
                  $_.Line
              }
          }
